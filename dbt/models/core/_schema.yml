version: 2

models:
  - name: d_driver
    columns:
      - name: driver_key
        tests:
          - unique
          - not_null
  - name: d_circuit
    columns:
      - name: circuit_key
        tests:
          - unique
          - not_null
  - name: d_constructor
    columns:
      - name: constructor_key
        tests:
          - unique
          - not_null
  - name: d_season
    columns:
      - name: season
        tests:
          - unique
          - not_null
  - name: d_race
    columns:
      - name: race_key
        tests:
          - unique
          - not_null
      - name: race_date
        tests:
          - not_null
  - name: f_lap
    columns:
      - name: lap_key
        tests:
          - unique
          - not_null
      - name: race_date
        tests:
          - not_null
      - name: race_key
        tests:
          - not_null
      - name: circuit_key
        tests:
          - not_null
      - name: driver_key
        tests:
          - not_null
      - name: lap_number
        tests:
          - not_null
  - name: f_pitstop
    columns:
      - name: pitstop_key
        tests:
          - unique
          - not_null
      - name: race_date
        tests:
          - not_null
      - name: race_key
        tests:
          - not_null
      - name: circuit_key
        tests:
          - not_null
      - name: driver_key
        tests:
          - not_null
      - name: pitstop_number
        tests:
          - not_null
  - name: f_result
    columns:
      - name: result_key
        tests:
          - unique
          - not_null
      - name: race_date
        tests:
          - not_null
      - name: race_id
        tests:
          - not_null
      - name: circuit_id
        tests:
          - not_null
          - relationships:
              to: ref('d_circuit')
              field: circuit_id
      - name: driver_id
        tests:
          - not_null
          - relationships:
              to: ref('d_driver')
              field: driver_id
      - name: constructor_id
        tests:
          - not_null
          - relationships:
              to: ref('d_constructor')
              field: constructor_id
      - name: result_position
        tests:
          - not_null